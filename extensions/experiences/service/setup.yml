---
# Labels
#
controller_labels:
  - name: rhel
    organization: "{{ organization | default('Default') }}"
  - name: service
    organization: "{{ organization | default('Default') }}"

# Execution Environments
#
controller_execution_environments:
  # - name: apd-ee-25
  #   description: apd-ee-25
  #   image: quay.io/ansible-product-demos/apd-ee-25
  #   pull: always
  - name: apd-ee-25-rhel
    description: Allow running RHEL experience demo. Based on apd-ee-25.
    image: quay.io/justinc1_github/apd-ee-25-experience:latest
    pull: always

# Ansible Experience RHEL Inventory
# Ansible Experience RHEL Credentials
#  pub: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINpfVbgH2SLbCBR4cRJtn/P+1m7BMMMsWyA0nEaO1FVk centos@vm1.novalocal

# Projects
#
controller_projects:
  - name: Ansible Experience Services
    organization: "{{ organization | default('Default') }}"
    scm_branch: feature-service-aae
    scm_clean: false
    scm_delete_on_update: true
    scm_type: git
    scm_update_on_launch: true
    scm_url: https://github.com/justinc1/experience_demo.git


# Job Templates
#
controller_templates:
  - name: RHEL / Configure Services
    ask_inventory_on_launch: true
    playbook: extensions/experiences/service/playbooks/configure_service.yml
    project: Ansible Experience Services
    ask_variables_on_launch: false
    survey_enabled: true
    labels:
      - rhel
      - service
    # experience.path - path to setup.yml, it is set by seedseed repo
    survey_spec: "{{ lookup('file', experience.path.replace('setup.yml', '') + 'template_surveys/configure_service.yml') | from_yaml }}"
    # inventory: Ansible Experience RHEL Inventory
    credentials: Ansible Experience RHEL Credentials
    ask_credential_on_launch: true
    execution_environment: apd-ee-25-rhel
